FROM apache/airflow:2.9.0-python3.11


ENV AIRFLOW_VERSION=2.9.0
ENV PYTHON_VERSION=3.11
ENV CONSTRAINT_URL="https://raw.githubusercontent.com/apache/airflow/constraints-${AIRFLOW_VERSION}/constraints-${PYTHON_VERSION}.txt"


COPY requirements.txt .

RUN pip install --no-cache-dir -r requirements.txt -c "${CONSTRAINT_URL}"
RUN pip install --no-cache-dir openmetadata-ingestion==1.7.3.0 -c "${CONSTRAINT_URL}"

USER airflow